{% extends 'blog/base.html' %}

{% block content %}
<h1>Perfil de {{ usuario.username }}</h1>

{% if perfil.foto %}
  <img src="{{ perfil.foto.url }}" width="150" style="border-radius: 50%;" alt="Foto de perfil"><br>
{% else %}
  <p>游뗻 Sem foto de perfil ainda</p>
{% endif %}

{% if request.user != usuario %}
  <a href="{% url 'enviar_mensagem' usuario.username %}">游닐 Enviar mensagem</a>
{% endif %}

<!-- Bio do usu치rio -->
<p><strong>Bio:</strong> {{ perfil.bio|default:"Usu치rio sem bio ainda." }}</p>

<!-- Contagem de seguidores e seguindo -->
<p><strong>Seguidores:</strong> {{ seguidores.count }}</p>
<p><strong>Seguindo:</strong> {{ seguindo.count }}</p>

<!-- Bot칚o de editar bio (s칩 para o dono do perfil) -->
{% if request.user == usuario %}
  <a href="{% url 'editar_perfil' %}">九勇 Editar Bio</a>
{% endif %}

<!-- Bot칚o de seguir/deixar de seguir (s칩 para outros usu치rios) -->
{% if request.user != usuario %}
    <form method="post" action="{% if request.user in seguidores %}{% url 'deixar_de_seguir_usuario' usuario.username %}{% else %}{% url 'seguir_usuario' usuario.username %}{% endif %}">
        {% csrf_token %}
        <button type="submit">
            {% if request.user in seguidores %}
                Deixar de seguir
            {% else %}
                Seguir
            {% endif %}
        </button>
    </form>
{% endif %}

<hr>

<!-- Lista de posts do usu치rio -->
<h2>Posts de {{ usuario.username }}</h2>
<ul>
    {% for post in posts %}
        <li><a href="{% url 'detalhes_post' post.id %}">{{ post.titulo }}</a></li>
    {% empty %}
        <li>Este usu치rio ainda n칚o publicou nada.</li>
    {% endfor %}
</ul>

{% endblock %}
